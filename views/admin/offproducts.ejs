<%- include('../partials/admin-header') %>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />


<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Offer Management</h2>
            <a href="/admin/products" class="btn rounded btn-primary mb-3">Add offer products</a> <br>


            <!-- <p>List of all products</p> -->

            <% if (offeradded) { %>

                <div class="alert alert-success text-center" role="alert" id="alert">
                    Offer added successfully!
                  </div>
             
            <% } %>

            <% if (del) { %>

                <div class="alert alert-danger text-center" role="alert" id="alert">
                    Offer product removed!
                  </div>
             
            <% } %>

            <% if (edit) { %>

                <div class="alert alert-success text-center" role="alert" id="alert">
                    Changes saved!
                  </div>
             
            <% } %>
        </div>

        
       
        
    </div>
    
    <div class="card mb-4">
       
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover" id="myTable">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th>Image</th>
                            <th scope="col">Product Name</th>
                            <th scope="col">price</th>
                            <th scope="col">Offer Price</th>
                            <th scope="col">Category</th>
                            <th scope="col">Stock</th>
                            <th scope="col" class=""> Action </th>
                        </tr>
                    </thead>
                    <tbody>
                        <% let i = 1 %> 
                         <% data.forEach(element => { %>
                          
                        
                        
                        <tr>
                            <td><%=i++ %></td>
                            <td><img src="/images/products/<%=element.image[0]%> " style="width:30px;height:30px;" alt=""></td>
                            <td><%=element.productTitle %></td>
                            <td><%=element.price %></td>
                            <td><%=element.offprice %></td>
                            <td><%=element.category %></td>
                            <td><%=element.stock %></td>
                            <td  class="" > 

                            <a href="/admin/editoffer/<%=element._id  %> " title="EDIT" class="btn btn-md rounded font-sm"><i class="ri-edit-2-line"></i></a>
                        
                            <a href="/admin/deleteoffer/<%=element._id %> " title="DELETE" onclick="return confirm('Are you sure you want to delete this item? Click ok to confirm');" class="btn btn-md rounded font-sm" style="background-color: rgb(188, 4, 4);"><i class="ri-delete-bin-5-line"></i></a>
                                                    
                            </td>
                           
                            
                        </tr>

                        <% }) %>
                  
                      
                       
                    </tbody>
                </table>
            </div> <!-- table-responsive //end -->
        </div> <!-- card-body end// -->
    </div> <!-- card end// -->
  
</section>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>


<script>
    function hide(id){
        setTimeout(()=>{
            document.getElementById(id).style.display = "none"
        },1300)
    }

    hide('alert')
</script>


<%- include('../partials/admin-scripts') %>
